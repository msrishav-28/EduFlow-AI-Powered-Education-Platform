(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[993],{54330:function(e,t,n){Promise.resolve().then(n.bind(n,3259))},3259:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(85583),l=n(1780),i=n(57437),s=n(91859),a=n(94834),o=n(29116),c=n(99376),d=n(26743),u=n(82148),h=n(5978),m=n(17293),f=n(50080);function x(){let[e,t]=(0,a.eJ)(""),[n,s]=(0,a.eJ)(""),[x,p]=(0,a.eJ)(null),[g,v]=(0,a.eJ)({}),[b,w]=(0,a.eJ)(null),[j,N]=(0,a.eJ)(null),[y,E]=(0,a.eJ)(!1),C=(0,c.useSearchParams)(),{provider:S,setProvider:_}=(0,d.Q)();(0,a.d4)(()=>{let e=C.get("p");e&&_(e)},[C,_]),(0,a.d4)(()=>{if(!m.I8)return;let e=(0,u.Aj)(m.I8,e=>{var t;return N(null!==(t=null==e?void 0:e.uid)&&void 0!==t?t:null)});return()=>e&&e()},[]);let I=e=>(0,f.J)(e),A=async()=>{if(e.trim()){E(!0);try{let t=await (0,o.Y)('Create 5 high-quality multiple-choice questions from the content below.\nReturn strictly as JSON array with this shape:\n[\n  {"question": string, "options": [string, string, string, string], "correct": "A"|"B"|"C"|"D", "explanation": string}\n]\nNo markdown, no preface, only JSON.\n\nContent:\n'.concat(e),S);s(t);let n=I(t);p(n),v(n?Object.fromEntries(n.map((e,t)=>[t,null])):{})}finally{E(!1)}}},k=(0,a.Ye)(()=>Object.values(g).filter(e=>null!=e).length,[g]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("h1",{className:"text-2xl font-semibold",children:"MCQ Generator"}),(0,i.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Paste text here...",className:"focus-ring mt-4 h-40 w-full rounded-xl border border-white/10 bg-white/5 p-3"}),(0,i.jsxs)("div",{className:"mt-3 flex gap-3",children:[(0,i.jsx)("button",{onClick:A,disabled:y,className:"rounded-xl bg-primary-500 px-4 py-2 disabled:opacity-60",children:y?"Generating…":"Generate"}),x&&(0,i.jsx)("button",{onClick:()=>{w(null),v(x?Object.fromEntries(x.map((e,t)=>[t,null])):{})},className:"rounded-xl border border-white/10 bg-white/5 px-4 py-2",children:"Reset Answers"})]}),!x&&(0,i.jsx)("div",{className:"glass mt-4 rounded-2xl p-4 text-white/70 whitespace-pre-wrap",children:n||"Generated MCQs appear here."}),x&&(0,i.jsxs)("div",{className:"mt-6 space-y-6",children:[x.map((e,t)=>(0,i.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,i.jsxs)("div",{className:"font-medium",children:["Q",t+1,". ",e.question]}),(0,i.jsx)("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:e.options.map(n=>{let s=g[t]===n.label,a=null!=b&&e.correct===n.label,o=null!=b&&s&&!a;return(0,i.jsxs)("button",{onClick:()=>v(e=>(0,l._)((0,r._)({},e),{[t]:n.label})),disabled:null!=b,className:"text-left rounded-xl border px-3 py-2 transition "+(s?"border-primary-400 bg-primary-500/20 ":"border-white/10 bg-white/5 hover:bg-white/10 ")+(a?" ring-1 ring-green-400":"")+(o?" ring-1 ring-red-400":""),children:[(0,i.jsx)("span",{className:"mr-2 inline-flex h-6 w-6 items-center justify-center rounded-md bg-white/10 text-sm",children:n.label}),n.text]},n.label)})}),null!=b&&(0,i.jsxs)("div",{className:"mt-3 text-sm text-white/70",children:["Correct answer: ",(0,i.jsx)("span",{className:"font-medium text-green-300",children:e.correct}),e.explanation&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"mx-2",children:"•"}),(0,i.jsx)("span",{children:e.explanation})]})]})]},t)),(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"text-sm text-white/70",children:["Answered ",k," / ",x.length]}),null==b?(0,i.jsx)("button",{onClick:()=>{if(!x)return;let t=0;if(x.forEach((e,n)=>{g[n]===e.correct&&(t+=1)}),w(t),j&&m.db){let n=(0,h.hJ)(m.db,"users",j,"sessions");(0,h.ET)(n,{module:"mcq",total:x.length,correct:t,accuracy:Number((t/x.length).toFixed(3)),contentChars:e.length,provider:S,createdAt:(0,h.Bt)()}).catch(()=>{})}},disabled:k!==x.length,className:"rounded-xl bg-emerald-500 px-4 py-2 disabled:opacity-60",children:"Submit"}):(0,i.jsxs)("div",{className:"text-lg",children:["Score: ",(0,i.jsxs)("span",{className:"font-semibold",children:[b," / ",x.length]})]})]})]})]})}function p(){return(0,i.jsx)(s.AppShell,{children:(0,i.jsx)(a.n4,{fallback:(0,i.jsx)("div",{className:"text-white/70",children:"Loading…"}),children:(0,i.jsx)(x,{})})})}},91859:function(e,t,n){"use strict";n.d(t,{AppShell:function(){return y}});var r=n(57437),l=n(27648),i=n(80646),s=n(73247),a=n(94766),o=n(85929),c=n(97226);function d(){let{theme:e,setTheme:t}=(0,i.F)(),n="dark"===e||"system"===e;return(0,r.jsx)("header",{className:"sticky top-0 z-30 border-b border-white/10 bg-bg/60 backdrop-blur-xs",children:(0,r.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-6 py-3",children:[(0,r.jsx)(l.default,{href:"/",className:"font-semibold",children:"EduFlow"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"glass hidden items-center gap-2 rounded-xl px-3 py-1.5 text-white/70 sm:flex",children:[(0,r.jsx)(s.Z,{className:"h-4 w-4"}),(0,r.jsx)("input",{className:"bg-transparent outline-none placeholder:text-white/40",placeholder:"Search...","aria-label":"Search"})]}),(0,r.jsx)("button",{"aria-label":"Notifications",className:"rounded-xl p-2 hover:bg-white/5 focus-ring",children:(0,r.jsx)(a.Z,{className:"h-5 w-5"})}),(0,r.jsx)("button",{"aria-label":"Toggle theme",onClick:()=>t(n?"light":"dark"),className:"rounded-xl p-2 hover:bg-white/5 focus-ring",children:n?(0,r.jsx)(o.Z,{className:"h-5 w-5"}):(0,r.jsx)(c.Z,{className:"h-5 w-5"})})]})]})})}var u=n(2265);function h(){return!function(){let[e,t]=(0,u.useState)(!0);return(0,u.useEffect)(()=>{let e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),t(navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),e}()?(0,r.jsx)("div",{role:"status","aria-live":"polite",className:"sticky top-0 z-50 w-full bg-yellow-500/20 py-2 text-center text-yellow-200",children:"You are offline. Changes will sync when you're back online."}):null}var m=n(99376),f=n(82222),x=n(81555),p=n(48736),g=n(45554),v=n(25330),b=n(98728),w=n(64502);let j=[{href:"/dashboard/chat",label:"AI Chat",icon:f.Z},{href:"/dashboard/qa",label:"Q&A",icon:x.Z},{href:"/dashboard/summarize",label:"Summarize",icon:p.Z},{href:"/dashboard/mcq",label:"MCQ",icon:g.Z},{href:"/dashboard/code-explainer",label:"Code",icon:v.Z},{href:"/settings",label:"Settings",icon:b.Z}];function N(){let e=(0,m.usePathname)();return(0,r.jsx)("aside",{className:"sticky top-16 hidden h-[calc(100vh-4rem)] w-60 shrink-0 lg:block",children:(0,r.jsx)("nav",{className:"glass h-full rounded-2xl p-3",children:j.map(t=>{let{href:n,label:i,icon:s}=t,a=null==e?void 0:e.startsWith(n);return(0,r.jsxs)(l.default,{href:n,className:(0,w.cn)("flex items-center gap-3 rounded-xl px-3 py-2 text-white/80 hover:bg-white/5",a&&"bg-white/10 text-white"),"aria-current":a?"page":void 0,children:[(0,r.jsx)(s,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:i})]},n)})})})}function y(e){let{children:t}=e,n=(0,m.usePathname)(),l=(null==n?void 0:n.startsWith("/dashboard"))||"/settings"===n;return(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(d,{}),(0,r.jsx)(h,{}),(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-6 py-8",children:l?(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[15rem,1fr]",children:[(0,r.jsx)(N,{}),(0,r.jsx)("div",{children:t})]}):t})]})}},80646:function(e,t,n){"use strict";n.d(t,{f:function(){return s},F:function(){return a}});var r=n(57437),l=n(2265);let i=(0,l.createContext)(void 0);function s(e){let{children:t}=e,[n,s]=(0,l.useState)("system");return(0,l.useEffect)(()=>{let e=localStorage.getItem("theme");e&&s(e)},[]),(0,l.useEffect)(()=>{let e=window.document.documentElement,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r="system"===n?t?"dark":"light":n;e.classList.toggle("dark","dark"===r),localStorage.setItem("theme",n)},[n]),(0,r.jsx)(i.Provider,{value:{theme:n,setTheme:s},children:t})}function a(){let e=(0,l.useContext)(i);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},29116:function(e,t,n){"use strict";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",n=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,provider:t})});if(!n.ok)throw Error((await n.json().catch(()=>({}))).error||"Request failed ".concat(n.status));return(await n.json()).content}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",n=arguments.length>2?arguments[2]:void 0,r=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,provider:t,stream:!0})});if(!r.ok||!r.body)throw Error("Stream failed ".concat(r.status));let l=r.body.getReader(),i=new TextDecoder;for(;;){let{done:e,value:t}=await l.read();if(e)break;for(let e of i.decode(t).split("\n").filter(e=>e.trim()))try{let t=JSON.parse(e);t.response&&n&&n(t.response)}catch(e){}}}n.d(t,{Y:function(){return r},k:function(){return l}})},64502:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}n.d(t,{cn:function(){return r}})},17293:function(e,t,n){"use strict";let r,l,i,s;n.d(t,{I8:function(){return m},Vv:function(){return x},db:function(){return f}});var a=n(738),o=n(82148),c=n(5978),d=n(96485),u=n(40257);let h={apiKey:u.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:u.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:u.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:u.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:u.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:u.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:u.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};h.apiKey&&(r=(0,a.C6)().length?(0,a.C6)()[0]:(0,a.ZF)(h),l=(0,o.v0)(r),i=(0,c.ad)(r),(0,d.cF)(r),s=new o.hJ);let m=l,f=i,x=s},50080:function(e,t,n){"use strict";function r(e){try{let t=e.indexOf("["),n=e.lastIndexOf("]");if(-1!==t&&-1!==n){let r=JSON.parse(e.slice(t,n+1)).map(e=>{var t,n,r,l,i,s,a,o,c;let d=(null!==(n=null!==(t=e.options)&&void 0!==t?t:e.choices)&&void 0!==n?n:[]).map((e,t)=>{var n;return{label:["A","B","C","D"][t],text:"string"==typeof e?e:null!==(n=null==e?void 0:e.text)&&void 0!==n?n:String(e)}}),u=(null!==(i=null!==(l=null!==(r=e.correct)&&void 0!==r?r:e.answer)&&void 0!==l?l:e.correctOption)&&void 0!==i?i:"").toString().trim().toUpperCase();return{question:null!==(a=null!==(s=e.question)&&void 0!==s?s:e.q)&&void 0!==a?a:"",options:d,correct:["A","B","C","D"].includes(u)?u:"A",explanation:null!==(c=null!==(o=e.explanation)&&void 0!==o?o:e.why)&&void 0!==c?c:e.reason}});if(r.length)return r}}catch(e){}let t=e.split(/\n\s*\n/).filter(Boolean),n=[];for(let e of t){let t=e.split(/\n/).filter(Boolean);if(t.length<3)continue;let i=t[0].replace(/^\d+\.?\s*/,"").trim(),s=[];for(let e of t.slice(1)){let t=e.match(/^([ABCD])\)?[\.:\-]?\s*(.*)$/i);t&&s.push({label:t[1].toUpperCase(),text:t[2].trim()})}let a=t.find(e=>/correct|answer/i.test(e)),o=t.find(e=>/explanation/i.test(e)),c=null==a?void 0:a.match(/([ABCD])/i);if(s.length){var r,l;n.push({question:i,options:s.slice(0,4),correct:null!==(l=null==c?void 0:null===(r=c[1])||void 0===r?void 0:r.toUpperCase())&&void 0!==l?l:"A",explanation:null==o?void 0:o.replace(/^[Ee]xplanation[:\-]\s*/,"")})}}return n.length?n:null}n.d(t,{J:function(){return r}})},94834:function(e,t,n){"use strict";n.d(t,{Ye:function(){return r.useMemo},d4:function(){return r.useEffect},eJ:function(){return r.useState},n4:function(){return r.Suspense}});var r=n(2265)},62487:function(e,t,n){"use strict";n.d(t,{Gp:function(){return r.forwardRef},az:function(){return r.createElement}});var r=n(2265)},26743:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(59625),l=n(89134);let i=(0,r.Ue)()((0,l.tJ)(e=>({provider:"auto",setProvider:t=>e({provider:t})}),{name:"ai-provider"}))}},function(e){e.O(0,[609,15,338,129,883,971,117,744],function(){return e(e.s=54330)}),_N_E=e.O()}]);