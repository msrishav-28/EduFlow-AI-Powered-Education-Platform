(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[158],{74643:function(e,t,s){Promise.resolve().then(s.bind(s,39682))},39682:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var l=s(57437),n=s(91859),r=s(2265),a=s(82148),i=s(17293),c=s(5978);function d(){let[e,t]=(0,r.useState)(null),[s,n]=(0,r.useState)(!0),[d,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(!i.I8)return;let e=(0,a.Aj)(i.I8,e=>{var s;return t(null!==(s=null==e?void 0:e.uid)&&void 0!==s?s:null)});return()=>e&&e()},[]),(0,r.useEffect)(()=>{(async()=>{if(!e||!i.db){o([]),n(!1);return}n(!0);try{let t=(0,c.hJ)(i.db,"users",e,"sessions"),s=(0,c.IO)(t,(0,c.Xo)("createdAt","desc"),(0,c.b9)(100)),l=await (0,c.PL)(s);o(l.docs.map(e=>e.data()))}finally{n(!1)}})()},[e]);let u=(0,r.useMemo)(()=>{if(!d.length)return null;let e=d.filter(e=>"mcq"===e.module),t=e.length,s=t?e.reduce((e,t)=>{var s;return e+(null!==(s=t.accuracy)&&void 0!==s?s:0)},0)/t:0;return{attempts:t,avgAcc:s,correct:e.reduce((e,t)=>{var s;return e+(null!==(s=t.correct)&&void 0!==s?s:0)},0),totalQs:e.reduce((e,t)=>{var s;return e+(null!==(s=t.total)&&void 0!==s?s:0)},0)}},[d]),h=(0,r.useRef)(null),m=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!d.length)return;let e=Date.now()-5184e5,t=Array(7).fill(0);for(let r of d){var s,l,n;let a=null!==(n=null===(l=r.createdAt)||void 0===l?void 0:null===(s=l.toMillis)||void 0===s?void 0:s.call(l))&&void 0!==n?n:0;if(!a)continue;let i=Math.max(0,Math.min(6,Math.floor((a-e)/864e5)));t[i]+=1}let r=h.current;if(r){let e=r.getContext("2d");e.clearRect(0,0,r.width,r.height);let s=r.width,l=r.height,n=(s-40)/t.length-8,a=Math.max(1,...t);t.forEach((t,s)=>{let r=t/a*(l-40);e.fillStyle="rgba(99,102,241,0.8)",e.fillRect(20+s*(n+8),l-20-r,n,r)})}let a={};d.forEach(e=>{a[e.module]=(a[e.module]||0)+1});let i=m.current;if(i){let e=i.getContext("2d");e.clearRect(0,0,i.width,i.height),Object.keys(a);let t=Object.values(a),s=t.reduce((e,t)=>e+t,0)||1,l=-Math.PI/2,n=i.width/2,r=i.height/2,c=Math.min(n,r)-10;t.forEach((t,a)=>{let i=t/s*Math.PI*2;e.beginPath(),e.fillStyle="hsl(".concat(60*a%360," 70% 55% / 0.9)"),e.moveTo(n,r),e.arc(n,r,c,l,l+i),e.closePath(),e.fill(),l+=i})}},[d]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"Study Pattern Analysis"}),!e&&(0,l.jsx)("p",{className:"mt-2 text-white/70",children:"Sign in to see personalized analytics and progress."}),e&&s&&(0,l.jsx)("p",{className:"mt-2 text-white/70",children:"Loading your recent sessions…"}),e&&!s&&!d.length&&(0,l.jsx)("p",{className:"mt-2 text-white/70",children:"No sessions yet. Generate MCQs and submit your answers to build insights."}),(0,l.jsxs)("div",{className:"mt-6 grid gap-6 lg:grid-cols-4",children:[(0,l.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,l.jsx)("div",{className:"text-sm text-white/60",children:"MCQ attempts"}),(0,l.jsx)("div",{className:"mt-1 text-2xl font-semibold",children:u?u.attempts:0})]}),(0,l.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,l.jsx)("div",{className:"text-sm text-white/60",children:"Average accuracy"}),(0,l.jsxs)("div",{className:"mt-1 text-2xl font-semibold",children:[u?Math.round(100*u.avgAcc):0,"%"]})]}),(0,l.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,l.jsx)("div",{className:"text-sm text-white/60",children:"Questions answered"}),(0,l.jsx)("div",{className:"mt-1 text-2xl font-semibold",children:u?u.totalQs:0})]}),(0,l.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,l.jsx)("div",{className:"text-sm text-white/60",children:"Correct answers"}),(0,l.jsx)("div",{className:"mt-1 text-2xl font-semibold",children:u?u.correct:0})]})]}),(0,l.jsxs)("div",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[(0,l.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,l.jsx)("div",{className:"mb-2 font-medium",children:"Weekly Activity"}),(0,l.jsx)("canvas",{ref:h,width:560,height:220,className:"w-full"})]}),(0,l.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,l.jsx)("div",{className:"mb-2 font-medium",children:"Module Breakdown"}),(0,l.jsx)("canvas",{ref:m,width:560,height:220,className:"w-full"})]})]})]})}function o(){return(0,l.jsx)(n.AppShell,{children:(0,l.jsx)(r.Suspense,{fallback:(0,l.jsx)("div",{className:"text-white/70",children:"Loading…"}),children:(0,l.jsx)(d,{})})})}},91859:function(e,t,s){"use strict";s.d(t,{AppShell:function(){return E}});var l=s(57437),n=s(27648),r=s(80646),a=s(73247),i=s(94766),c=s(85929),d=s(97226);function o(){let{theme:e,setTheme:t}=(0,r.F)(),s="dark"===e||"system"===e;return(0,l.jsx)("header",{className:"sticky top-0 z-30 border-b border-white/10 bg-bg/60 backdrop-blur-xs",children:(0,l.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-6 py-3",children:[(0,l.jsx)(n.default,{href:"/",className:"font-semibold",children:"EduFlow"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsxs)("div",{className:"glass hidden items-center gap-2 rounded-xl px-3 py-1.5 text-white/70 sm:flex",children:[(0,l.jsx)(a.Z,{className:"h-4 w-4"}),(0,l.jsx)("input",{className:"bg-transparent outline-none placeholder:text-white/40",placeholder:"Search...","aria-label":"Search"})]}),(0,l.jsx)("button",{"aria-label":"Notifications",className:"rounded-xl p-2 hover:bg-white/5 focus-ring",children:(0,l.jsx)(i.Z,{className:"h-5 w-5"})}),(0,l.jsx)("button",{"aria-label":"Toggle theme",onClick:()=>t(s?"light":"dark"),className:"rounded-xl p-2 hover:bg-white/5 focus-ring",children:s?(0,l.jsx)(c.Z,{className:"h-5 w-5"}):(0,l.jsx)(d.Z,{className:"h-5 w-5"})})]})]})})}var u=s(2265);function h(){return!function(){let[e,t]=(0,u.useState)(!0);return(0,u.useEffect)(()=>{let e=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",s),t(navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]),e}()?(0,l.jsx)("div",{role:"status","aria-live":"polite",className:"sticky top-0 z-50 w-full bg-yellow-500/20 py-2 text-center text-yellow-200",children:"You are offline. Changes will sync when you're back online."}):null}var m=s(99376),x=s(82222),f=s(81555),v=s(48736),g=s(45554),w=s(25330),j=s(98728),N=s(64502);let p=[{href:"/dashboard/chat",label:"AI Chat",icon:x.Z},{href:"/dashboard/qa",label:"Q&A",icon:f.Z},{href:"/dashboard/summarize",label:"Summarize",icon:v.Z},{href:"/dashboard/mcq",label:"MCQ",icon:g.Z},{href:"/dashboard/code-explainer",label:"Code",icon:w.Z},{href:"/settings",label:"Settings",icon:j.Z}];function b(){let e=(0,m.usePathname)();return(0,l.jsx)("aside",{className:"sticky top-16 hidden h-[calc(100vh-4rem)] w-60 shrink-0 lg:block",children:(0,l.jsx)("nav",{className:"glass h-full rounded-2xl p-3",children:p.map(t=>{let{href:s,label:r,icon:a}=t,i=null==e?void 0:e.startsWith(s);return(0,l.jsxs)(n.default,{href:s,className:(0,N.cn)("flex items-center gap-3 rounded-xl px-3 py-2 text-white/80 hover:bg-white/5",i&&"bg-white/10 text-white"),"aria-current":i?"page":void 0,children:[(0,l.jsx)(a,{className:"h-5 w-5"}),(0,l.jsx)("span",{children:r})]},s)})})})}function E(e){let{children:t}=e,s=(0,m.usePathname)(),n=(null==s?void 0:s.startsWith("/dashboard"))||"/settings"===s;return(0,l.jsxs)("div",{className:"min-h-screen",children:[(0,l.jsx)(o,{}),(0,l.jsx)(h,{}),(0,l.jsx)("div",{className:"mx-auto max-w-7xl px-6 py-8",children:n?(0,l.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[15rem,1fr]",children:[(0,l.jsx)(b,{}),(0,l.jsx)("div",{children:t})]}):t})]})}},80646:function(e,t,s){"use strict";s.d(t,{f:function(){return a},F:function(){return i}});var l=s(57437),n=s(2265);let r=(0,n.createContext)(void 0);function a(e){let{children:t}=e,[s,a]=(0,n.useState)("system");return(0,n.useEffect)(()=>{let e=localStorage.getItem("theme");e&&a(e)},[]),(0,n.useEffect)(()=>{let e=window.document.documentElement,t=window.matchMedia("(prefers-color-scheme: dark)").matches,l="system"===s?t?"dark":"light":s;e.classList.toggle("dark","dark"===l),localStorage.setItem("theme",s)},[s]),(0,l.jsx)(r.Provider,{value:{theme:s,setTheme:a},children:t})}function i(){let e=(0,n.useContext)(r);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},64502:function(e,t,s){"use strict";function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}s.d(t,{cn:function(){return l}})},17293:function(e,t,s){"use strict";let l,n,r,a;s.d(t,{I8:function(){return m},Vv:function(){return f},db:function(){return x}});var i=s(738),c=s(82148),d=s(5978),o=s(96485),u=s(40257);let h={apiKey:u.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:u.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:u.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:u.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:u.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:u.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:u.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};h.apiKey&&(l=(0,i.C6)().length?(0,i.C6)()[0]:(0,i.ZF)(h),n=(0,c.v0)(l),r=(0,d.ad)(l),(0,o.cF)(l),a=new c.hJ);let m=n,x=r,f=a},62487:function(e,t,s){"use strict";s.d(t,{Gp:function(){return l.forwardRef},az:function(){return l.createElement}});var l=s(2265)}},function(e){e.O(0,[609,15,338,129,971,117,744],function(){return e(e.s=74643)}),_N_E=e.O()}]);