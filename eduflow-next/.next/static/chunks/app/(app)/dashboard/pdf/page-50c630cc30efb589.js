(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[864],{67120:function(e,t,n){Promise.resolve().then(n.bind(n,90898))},90898:function(e,t,n){"use strict";let r,s;n.r(t),n.d(t,{default:function(){return j}});var a=n(85583),i=n(1780),l=n(57437),o=n(91859),c=n(2265),d=n(65725),u=n(99376),h=n(26743),m=n(29116),f=n(50080),p=n(82148),x=n(5978),g=n(17293);async function w(e){if(!r)throw Error("PDF parser not ready. Please try again in a moment.");let t=new Uint8Array(await e.arrayBuffer()),n=await r.getDocument({data:t}).promise,s="";for(let e=1;e<=n.numPages;e++){let t=await n.getPage(e);s+=(await t.getTextContent()).items.map(e=>e.str).join(" ")+"\n"}return s}async function b(e){if(!s)throw Error("DOCX parser not ready. Please try again in a moment.");let t=await e.arrayBuffer(),{value:n}=await s.extractRawText({arrayBuffer:t});return n}function v(){let e=(0,u.useSearchParams)(),{provider:t,setProvider:n}=(0,h.Q)();(0,c.useEffect)(()=>{let t=e.get("p");t&&n(t)},[e,n]);let[r,s]=(0,c.useState)(""),[o,v]=(0,c.useState)(""),[j,N]=(0,c.useState)(""),[y,E]=(0,c.useState)(""),[S,C]=(0,c.useState)(""),[_,k]=(0,c.useState)(null),[I,A]=(0,c.useState)({}),[B,P]=(0,c.useState)(null),[T,O]=(0,c.useState)(!1),[D,F]=(0,c.useState)(null);(0,c.useEffect)(()=>{if(!g.I8)return;let e=(0,p.Aj)(g.I8,e=>{var t;return F(null!==(t=null==e?void 0:e.uid)&&void 0!==t?t:null)});return()=>e&&e()},[]);let L=(0,c.useCallback)(async e=>{let t=e[0];if(t){s(t.name),O(!0);try{let e="";e="application/pdf"===t.type?await w(t):t.name.toLowerCase().endsWith(".docx")?await b(t):await t.text(),v(e)}finally{O(!1)}}},[]),{getRootProps:R,getInputProps:U,isDragActive:J}=(0,d.uI)({onDrop:L,multiple:!1}),q=async()=>{if(o.trim()){O(!0);try{let e="Create short, exam-ready notes (bulleted, concise) from this content.\n\n".concat(o),n="Create detailed, structured notes with headings, definitions, examples, and key formulas from this content.\n\n".concat(o),[r,s]=await Promise.all([(0,m.Y)(e,t),(0,m.Y)(n,t)]);if(N(r),E(s),D&&g.db){let e=(0,x.hJ)(g.db,"users",D,"sessions");(0,x.ET)(e,{module:"pdf-notes",provider:t,contentChars:o.length,shortLen:r.length,longLen:s.length,createdAt:(0,x.Bt)()}).catch(()=>{})}}finally{O(!1)}}},Z=async()=>{if(o.trim()){O(!0);try{let e=await (0,m.Y)('Create 5 high-quality multiple-choice questions from the content below.\nReturn strictly as JSON array with this shape:\n[{"question": string, "options": [string, string, string, string], "correct": "A"|"B"|"C"|"D", "explanation": string}]\nNo markdown, no preface, only JSON.\n\nContent:\n'.concat(o),t);C(e);let n=(0,f.J)(e);k(n),A(n?Object.fromEntries(n.map((e,t)=>[t,null])):{})}finally{O(!1)}}},G=Object.values(I).filter(e=>null!=e).length;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-2xl font-semibold",children:"PDF → Study Materials"}),(0,l.jsxs)("div",(0,i._)((0,a._)({},R()),{className:"mt-4 flex h-40 cursor-pointer flex-col items-center justify-center rounded-2xl border border-dashed border-white/20 bg-white/5",children:[(0,l.jsx)("input",(0,a._)({},U())),(0,l.jsx)("p",{className:"text-white/70",children:J?"Drop file here…":"Drag & drop a PDF or DOCX here, or click to upload"})]})),r&&(0,l.jsxs)("p",{className:"mt-2 text-sm text-white/60",children:["Selected: ",r]}),o&&(0,l.jsxs)("div",{className:"mt-4 grid gap-4",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:q,disabled:T,className:"rounded-xl bg-primary-500 px-4 py-2 disabled:opacity-60",children:T?"Generating…":"Generate Notes"}),(0,l.jsx)("button",{onClick:Z,disabled:T,className:"rounded-xl bg-primary-500 px-4 py-2 disabled:opacity-60",children:T?"Generating…":"Generate MCQs"})]}),(0,l.jsxs)("div",{className:"grid gap-4 lg:grid-cols-2",children:[(0,l.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,l.jsx)("h3",{className:"font-medium",children:"Short Notes"}),(0,l.jsx)("div",{className:"mt-2 whitespace-pre-wrap text-white/70",children:j||"—"})]}),(0,l.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,l.jsx)("h3",{className:"font-medium",children:"Long Notes"}),(0,l.jsx)("div",{className:"mt-2 whitespace-pre-wrap text-white/70",children:y||"—"})]})]}),(0,l.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,l.jsx)("h3",{className:"font-medium",children:"MCQs"}),!_&&(0,l.jsx)("div",{className:"mt-2 whitespace-pre-wrap text-white/70",children:S||"—"}),_&&(0,l.jsxs)("div",{className:"mt-4 space-y-6",children:[_.map((e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"font-medium",children:["Q",t+1,". ",e.question]}),(0,l.jsx)("div",{className:"mt-3 grid gap-2 sm:grid-cols-2",children:e.options.map(n=>{let r=I[t]===n.label,s=null!=B&&e.correct===n.label,o=null!=B&&r&&!s;return(0,l.jsxs)("button",{onClick:()=>A(e=>(0,i._)((0,a._)({},e),{[t]:n.label})),disabled:null!=B,className:"text-left rounded-xl border px-3 py-2 transition "+(r?"border-primary-400 bg-primary-500/20 ":"border-white/10 bg-white/5 hover:bg-white/10 ")+(s?" ring-1 ring-green-400":"")+(o?" ring-1 ring-red-400":""),children:[(0,l.jsx)("span",{className:"mr-2 inline-flex h-6 w-6 items-center justify-center rounded-md bg-white/10 text-sm",children:n.label}),n.text]},n.label)})}),null!=B&&(0,l.jsxs)("div",{className:"mt-3 text-sm text-white/70",children:["Correct answer: ",(0,l.jsx)("span",{className:"font-medium text-green-300",children:e.correct}),e.explanation&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"mx-2",children:"•"}),(0,l.jsx)("span",{children:e.explanation})]})]})]},t)),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"text-sm text-white/70",children:["Answered ",G," / ",_.length]}),null==B?(0,l.jsx)("button",{onClick:()=>{if(!_)return;let e=0;if(_.forEach((t,n)=>{I[n]===t.correct&&(e+=1)}),P(e),D&&g.db){let n=(0,x.hJ)(g.db,"users",D,"sessions");(0,x.ET)(n,{module:"pdf-mcq",total:_.length,correct:e,accuracy:Number((e/_.length).toFixed(3)),contentChars:o.length,provider:t,createdAt:(0,x.Bt)()}).catch(()=>{})}},disabled:G!==_.length,className:"rounded-xl bg-emerald-500 px-4 py-2 disabled:opacity-60",children:"Submit"}):(0,l.jsxs)("div",{className:"text-lg",children:["Score: ",(0,l.jsxs)("span",{className:"font-semibold",children:[B," / ",_.length]})]})]}),_&&(0,l.jsx)("button",{onClick:()=>{P(null),A(_?Object.fromEntries(_.map((e,t)=>[t,null])):{})},className:"rounded-xl border border-white/10 bg-white/5 px-4 py-2",children:"Reset Answers"})]})]})]})]})}function j(){return(0,l.jsx)(o.AppShell,{children:(0,l.jsx)(c.Suspense,{fallback:(0,l.jsx)("div",{className:"text-white/70",children:"Loading…"}),children:(0,l.jsx)(v,{})})})}n.e(980).then(n.bind(n,27781)).then(e=>{(r=e).GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(r.version,"/pdf.worker.min.js")}).catch(()=>{}),n.e(904).then(n.t.bind(n,25904,19)).then(e=>{var t;s=null!==(t=e.default)&&void 0!==t?t:e}).catch(()=>{}),r.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(r.version,"/pdf.worker.min.js")},91859:function(e,t,n){"use strict";n.d(t,{AppShell:function(){return y}});var r=n(57437),s=n(27648),a=n(80646),i=n(73247),l=n(94766),o=n(85929),c=n(97226);function d(){let{theme:e,setTheme:t}=(0,a.F)(),n="dark"===e||"system"===e;return(0,r.jsx)("header",{className:"sticky top-0 z-30 border-b border-white/10 bg-bg/60 backdrop-blur-xs",children:(0,r.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center justify-between px-6 py-3",children:[(0,r.jsx)(s.default,{href:"/",className:"font-semibold",children:"EduFlow"}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"glass hidden items-center gap-2 rounded-xl px-3 py-1.5 text-white/70 sm:flex",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4"}),(0,r.jsx)("input",{className:"bg-transparent outline-none placeholder:text-white/40",placeholder:"Search...","aria-label":"Search"})]}),(0,r.jsx)("button",{"aria-label":"Notifications",className:"rounded-xl p-2 hover:bg-white/5 focus-ring",children:(0,r.jsx)(l.Z,{className:"h-5 w-5"})}),(0,r.jsx)("button",{"aria-label":"Toggle theme",onClick:()=>t(n?"light":"dark"),className:"rounded-xl p-2 hover:bg-white/5 focus-ring",children:n?(0,r.jsx)(o.Z,{className:"h-5 w-5"}):(0,r.jsx)(c.Z,{className:"h-5 w-5"})})]})]})})}var u=n(2265);function h(){return!function(){let[e,t]=(0,u.useState)(!0);return(0,u.useEffect)(()=>{let e=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",e),window.addEventListener("offline",n),t(navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),e}()?(0,r.jsx)("div",{role:"status","aria-live":"polite",className:"sticky top-0 z-50 w-full bg-yellow-500/20 py-2 text-center text-yellow-200",children:"You are offline. Changes will sync when you're back online."}):null}var m=n(99376),f=n(82222),p=n(81555),x=n(48736),g=n(45554),w=n(25330),b=n(98728),v=n(64502);let j=[{href:"/dashboard/chat",label:"AI Chat",icon:f.Z},{href:"/dashboard/qa",label:"Q&A",icon:p.Z},{href:"/dashboard/summarize",label:"Summarize",icon:x.Z},{href:"/dashboard/mcq",label:"MCQ",icon:g.Z},{href:"/dashboard/code-explainer",label:"Code",icon:w.Z},{href:"/settings",label:"Settings",icon:b.Z}];function N(){let e=(0,m.usePathname)();return(0,r.jsx)("aside",{className:"sticky top-16 hidden h-[calc(100vh-4rem)] w-60 shrink-0 lg:block",children:(0,r.jsx)("nav",{className:"glass h-full rounded-2xl p-3",children:j.map(t=>{let{href:n,label:a,icon:i}=t,l=null==e?void 0:e.startsWith(n);return(0,r.jsxs)(s.default,{href:n,className:(0,v.cn)("flex items-center gap-3 rounded-xl px-3 py-2 text-white/80 hover:bg-white/5",l&&"bg-white/10 text-white"),"aria-current":l?"page":void 0,children:[(0,r.jsx)(i,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:a})]},n)})})})}function y(e){let{children:t}=e,n=(0,m.usePathname)(),s=(null==n?void 0:n.startsWith("/dashboard"))||"/settings"===n;return(0,r.jsxs)("div",{className:"min-h-screen",children:[(0,r.jsx)(d,{}),(0,r.jsx)(h,{}),(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-6 py-8",children:s?(0,r.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[15rem,1fr]",children:[(0,r.jsx)(N,{}),(0,r.jsx)("div",{children:t})]}):t})]})}},80646:function(e,t,n){"use strict";n.d(t,{f:function(){return i},F:function(){return l}});var r=n(57437),s=n(2265);let a=(0,s.createContext)(void 0);function i(e){let{children:t}=e,[n,i]=(0,s.useState)("system");return(0,s.useEffect)(()=>{let e=localStorage.getItem("theme");e&&i(e)},[]),(0,s.useEffect)(()=>{let e=window.document.documentElement,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r="system"===n?t?"dark":"light":n;e.classList.toggle("dark","dark"===r),localStorage.setItem("theme",n)},[n]),(0,r.jsx)(a.Provider,{value:{theme:n,setTheme:i},children:t})}function l(){let e=(0,s.useContext)(a);if(!e)throw Error("useTheme must be used within ThemeProvider");return e}},29116:function(e,t,n){"use strict";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",n=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,provider:t})});if(!n.ok)throw Error((await n.json().catch(()=>({}))).error||"Request failed ".concat(n.status));return(await n.json()).content}async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto",n=arguments.length>2?arguments[2]:void 0,r=await fetch("/api/ai/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:e,provider:t,stream:!0})});if(!r.ok||!r.body)throw Error("Stream failed ".concat(r.status));let s=r.body.getReader(),a=new TextDecoder;for(;;){let{done:e,value:t}=await s.read();if(e)break;for(let e of a.decode(t).split("\n").filter(e=>e.trim()))try{let t=JSON.parse(e);t.response&&n&&n(t.response)}catch(e){}}}n.d(t,{Y:function(){return r},k:function(){return s}})},64502:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}n.d(t,{cn:function(){return r}})},17293:function(e,t,n){"use strict";let r,s,a,i;n.d(t,{I8:function(){return m},Vv:function(){return p},db:function(){return f}});var l=n(738),o=n(82148),c=n(5978),d=n(96485),u=n(40257);let h={apiKey:u.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:u.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:u.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:u.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:u.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:u.env.NEXT_PUBLIC_FIREBASE_APP_ID,measurementId:u.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};h.apiKey&&(r=(0,l.C6)().length?(0,l.C6)()[0]:(0,l.ZF)(h),s=(0,o.v0)(r),a=(0,c.ad)(r),(0,d.cF)(r),i=new o.hJ);let m=s,f=a,p=i},50080:function(e,t,n){"use strict";function r(e){try{let t=e.indexOf("["),n=e.lastIndexOf("]");if(-1!==t&&-1!==n){let r=JSON.parse(e.slice(t,n+1)).map(e=>{var t,n,r,s,a,i,l,o,c;let d=(null!==(n=null!==(t=e.options)&&void 0!==t?t:e.choices)&&void 0!==n?n:[]).map((e,t)=>{var n;return{label:["A","B","C","D"][t],text:"string"==typeof e?e:null!==(n=null==e?void 0:e.text)&&void 0!==n?n:String(e)}}),u=(null!==(a=null!==(s=null!==(r=e.correct)&&void 0!==r?r:e.answer)&&void 0!==s?s:e.correctOption)&&void 0!==a?a:"").toString().trim().toUpperCase();return{question:null!==(l=null!==(i=e.question)&&void 0!==i?i:e.q)&&void 0!==l?l:"",options:d,correct:["A","B","C","D"].includes(u)?u:"A",explanation:null!==(c=null!==(o=e.explanation)&&void 0!==o?o:e.why)&&void 0!==c?c:e.reason}});if(r.length)return r}}catch(e){}let t=e.split(/\n\s*\n/).filter(Boolean),n=[];for(let e of t){let t=e.split(/\n/).filter(Boolean);if(t.length<3)continue;let a=t[0].replace(/^\d+\.?\s*/,"").trim(),i=[];for(let e of t.slice(1)){let t=e.match(/^([ABCD])\)?[\.:\-]?\s*(.*)$/i);t&&i.push({label:t[1].toUpperCase(),text:t[2].trim()})}let l=t.find(e=>/correct|answer/i.test(e)),o=t.find(e=>/explanation/i.test(e)),c=null==l?void 0:l.match(/([ABCD])/i);if(i.length){var r,s;n.push({question:a,options:i.slice(0,4),correct:null!==(s=null==c?void 0:null===(r=c[1])||void 0===r?void 0:r.toUpperCase())&&void 0!==s?s:"A",explanation:null==o?void 0:o.replace(/^[Ee]xplanation[:\-]\s*/,"")})}}return n.length?n:null}n.d(t,{J:function(){return r}})},62487:function(e,t,n){"use strict";n.d(t,{Gp:function(){return r.forwardRef},az:function(){return r.createElement}});var r=n(2265)},26743:function(e,t,n){"use strict";n.d(t,{Q:function(){return a}});var r=n(59625),s=n(89134);let a=(0,r.Ue)()((0,s.tJ)(e=>({provider:"auto",setProvider:t=>e({provider:t})}),{name:"ai-provider"}))}},function(e){e.O(0,[609,15,338,129,883,725,971,117,744],function(){return e(e.s=67120)}),_N_E=e.O()}]);